{
  "collection": "Cameras",
  "validator": {
    "$jsonSchema": {
      "bsonType": "object",
      "required": ["name", "stream_url"],
      "properties": {
        "_id": { "bsonType": "objectId" },
        "name": { "bsonType": "string", "minLength": 1 },
        "stream_url": { "bsonType": "string", "minLength": 1 },
        "location": {
          "bsonType": ["object", "null"],
          "properties": {
            "type": { "enum": ["Point"], "description": "GeoJSON type" },
            "coordinates": {
              "bsonType": "array",
              "items": { "bsonType": "double" },
              "minItems": 2,
              "maxItems": 2,
              "description": "[longitude, latitude]"
            }
          },
          "required": ["type", "coordinates"]
        },
        "created_at": { "bsonType": ["date", "null"] },
        "updated_at": { "bsonType": ["date", "null"] }
      },
      "additionalProperties": true
    }
  },
  "validationLevel": "moderate",
  "validationAction": "warn",
  "x-indexes": [
    { "keys": { "name": 1 }, "options": { "unique": true } },
    { "keys": { "location": "2dsphere" }, "options": {} }
  ]
}
